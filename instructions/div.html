<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instrução DIV/DIVU - RV32IM</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">← Voltar para Referência</a>

        <h1>DIV/DIVU - Divisão</h1>

        <h2>Sintaxe</h2>
        <div class="syntax-box">div  rd, rs1, rs2    # Divisão com sinal
divu rd, rs1, rs2    # Divisão sem sinal</div>

        <h2>Descrição</h2>
        <p><code>DIV</code> divide o valor com sinal em <code>rs1</code> pelo valor com sinal em <code>rs2</code>, armazenando o quociente em <code>rd</code>. <code>DIVU</code> realiza a mesma operação tratando ambos os operandos como números sem sinal. Faz parte da extensão M.</p>

        <h2>Formato e Codificação</h2>
        <div class="info-grid">
            <div class="info-item"><strong>Formato:</strong> R-type</div>
            <div class="info-item"><strong>Opcode:</strong> <code>0110011</code></div>
            <div class="info-item"><strong>funct3 (DIV):</strong> <code>0x4</code></div>
            <div class="info-item"><strong>funct3 (DIVU):</strong> <code>0x5</code></div>
            <div class="info-item"><strong>funct7:</strong> <code>0x01</code></div>
        </div>

        <h2>Operação</h2>
        <div class="syntax-box">DIV:  rd = (signed)rs1 / (signed)rs2
DIVU: rd = (unsigned)rs1 / (unsigned)rs2</div>

        <h2>Exemplos de Uso</h2>

        <div class="example-section">
            <h3>Exemplo 1: Divisão com sinal</h3>
            <div class="example-code"># Dividir números com sinal
li x5, -100            # x5 = -100
li x6, 3               # x6 = 3
div x7, x5, x6         # x7 = -33 (arredondado para zero)</div>
            <div class="example-explanation">
                DIV realiza divisão com sinal, arredondando o resultado em direção a zero. -100 / 3 = -33 (resto -1).
            </div>
        </div>

        <div class="example-section">
            <h3>Exemplo 2: Divisão sem sinal</h3>
            <div class="example-code"># Dividir números sem sinal
li x10, 100            # x10 = 100
li x11, 7              # x11 = 7
divu x12, x10, x11     # x12 = 14 (100 / 7)</div>
            <div class="example-explanation">
                DIVU trata ambos os operandos como números sem sinal. Útil para contagens e índices que são sempre positivos.
            </div>
        </div>

        <div class="example-section">
            <h3>Exemplo 3: Divisão por zero e casos especiais</h3>
            <div class="example-code"># Testar divisão por zero (não gera exceção!)
li x20, 10             # x20 = 10
li x21, 0              # x21 = 0 (divisor)
div x22, x20, x21      # x22 = -1 (resultado especial para div/0)
divu x23, x20, x21     # x23 = 0xFFFFFFFF (2^32 - 1)</div>
            <div class="example-explanation">
                Divisão por zero não gera exceção em RISC-V. DIV retorna -1 e DIVU retorna o maior valor sem sinal. O programador deve verificar o divisor se necessário.
            </div>
        </div>

        <h2>Observações</h2>
        <ul class="notes-list">
            <li>Divisão por zero NÃO gera exceção - retorna valor especial (-1 para DIV, 2^32-1 para DIVU)</li>
            <li>O resultado é arredondado em direção a zero</li>
            <li>Para obter o resto, use REM (com sinal) ou REMU (sem sinal)</li>
            <li>Faz parte da extensão M - requer processador RV32IM ou superior</li>
            <li>Pode ter latência significativa em algumas implementações de hardware</li>
            <li>Overflow: DIV com dividendo = -2^31 e divisor = -1 retorna -2^31</li>
        </ul>
    </div>
</body>
</html>
